<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge, chrome=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="Poffin.css" />
    <script src="Poffin.js" charset="utf-8"></script>
    <script src="Berry.js" charset="utf-8"></script>
    <title>宝芬口味计算器</title>
    </head>

    <!-- 
        数据整理：@谜芝果
        程序制作：@勤劳的牧场主
        信息参考：https://wiki.52poke.com/wiki/%E5%AE%9D%E8%8A%AC
     -->

    <body>
        <div class="title flex_row_center">
            <img src="logo.png" id="logo">
            <div style="padding-left: 10px;">宝芬口味计算器</div>
        </div>
        <div class="berry_select">
            <div class="berry_box">
                <a href="" id="href_1">
                    <div class="berry_img">
                        <img src="berry/Dream_不放树果_Sprite.png" id="berry_img_1">
                    </div>
                </a>
                <div class="berry_num">树果一</div>
                <select name="berry1" id="berry1" onchange="cal(1)"></select>
            </div>
            <div class="berry_box">
                <a href="" id="href_2">
                    <div class="berry_img">
                        <img src="berry/Dream_不放树果_Sprite.png" id="berry_img_2">
                    </div>
                </a>
                <div class="berry_num">树果二</div>
                <select name="berry2" id="berry2" onchange="cal(2)"></select>
            </div>
            <div class="berry_box">
                <a href="" id="href_3">
                    <div class="berry_img">
                        <img src="berry/Dream_不放树果_Sprite.png" id="berry_img_3">
                    </div>
                </a>
                <div class="berry_num">树果三</div>
                <select name="berry3" id="berry3" onchange="cal(3)"></select>
            </div>
            <div class="berry_box">
                <a href="" id="href_4">
                    <div class="berry_img">
                        <img src="berry/Dream_不放树果_Sprite.png" id="berry_img_4">
                    </div>
                </a>
                <div class="berry_num">树果四</div>
                <select name="berry4" id="berry4" onchange="cal(4)"></select>
            </div>
        </div>
        <div class="berry_info">
            <div class="berry_flex_row"></div>
            <div class="berry_flex_row">
                <div id="kouwei_La">辣</div>
                <div class="kw_num" name="ShuaiQi" id="ShuaiQi"></div>
            </div>
            <div class="berry_flex_row">
                <div id="kouwei_Se">涩</div>
                <div class="kw_num" name="MeiLi" id="MeiLi"></div>
            </div>
            <div class="berry_flex_row">
                <div id="kouwei_Tian">甜</div>
                <div class="kw_num" name="KeAi" id="KeAi"></div>
            </div>
            <div class="berry_flex_row">
                <div id="kouwei_Ku">苦</div>
                <div class="kw_num" name="CongMing" id="CongMing"></div>
            </div>
            <div class="berry_flex_row">
                <div id="kouwei_Suan">酸</div>
                <div class="kw_num" name="QiangZhuang" id="QiangZhuang"></div>
            </div>
            <div class="berry_flex_row"></div>
        </div>
        <div class="flex_row"><div class="kouwei">口味</div><div name="KouWei" id="KouWei"></div></div>
        <div class="flex_row"><div class="kouwei">润口度</div><div name="RunKou" id="RunKou"></div></div>
        <div class="kw_info" id='kw_info'></div>
        <div class="button_box">
            <div class="button" onclick="clean()">清空</div>
        </div>
        <div class="annotate">※ 以上基础口味值仅供参考：<br><br>
            宝芬制作时间少于1分钟会按比例提高最终口味值，制作时间大于1分钟会按比例降低最终口味值。<br><br>
            制作过程中洒出或者烤糊会降低最终口味值，甚至让宝芬变成难吃宝芬。<br><br>
            当所有的树果基础味道均为0，或味道和为负值的味道超过3种，或有相同的树果参与混合，则会做出难吃宝芬。<br><br>
            ※ 点击树果可以查看树果的详细信息，或查看<a href="berry_list.html">全部树果</a>。
        </div>
    </body>

    <script>

        for (var i in Berry) {
            var option = '<option value="' + i + '">' + Berry[i]['序'] + "&nbsp;&nbsp;" + i + '</option>'
            berry1.innerHTML=berry1.innerHTML+option
            berry2.innerHTML=berry2.innerHTML+option
            berry3.innerHTML=berry3.innerHTML+option
            berry4.innerHTML=berry4.innerHTML+option
        }
        // 本地存储检测
        if (typeof(Storage) == "undefined") {
            document.getElementById("subtitle").innerHTML='“你的浏览器不支持这个功能哦~”'
        }
        window.onload=function() {
            if ( localStorage.berry1 == undefined ) {
                localStorage.berry1="不放树果"
            }
            if ( localStorage.berry2 == undefined ) {
                localStorage.berry2="不放树果"
            }
            if ( localStorage.berry3 == undefined ) {
                localStorage.berry3="不放树果"
            }
            if ( localStorage.berry4 == undefined ) {
                localStorage.berry4="不放树果"
            }
            list_ = ['1','2','3','4']
            for (var i in list_) {
                var n=list_[i]
                berry1.value = localStorage.berry1
                document.getElementById("berry"+n).value = localStorage["berry"+n]
                document.getElementById("href_"+n).href="berry.html#" + localStorage["berry"+n]
                if (localStorage["berry"+n] == "不放树果") {
                    document.getElementById("href_" + n).style.pointerEvents="none"
                }
            }
            cal(0)
        }
    </script>
</html>